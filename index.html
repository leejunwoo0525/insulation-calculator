<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>단열재 추천 계산기</title>
<style>body{font-family:sans-serif;padding:20px}.tab{display:none}.tab.active{display:block}button.tab-btn{margin-right:10px;padding:10px 20px}table{border-collapse:collapse;width:100%;margin-top:10px}th,td{border:1px solid #ccc;padding:6px 10px;text-align:center}input,select{width:140px}.grade-A{background-color:#d4f8cc}.grade-B{background-color:#fff8b2}.grade-C{background-color:#ffe0b2}.grade-D{background-color:#f8cccc}#result{margin-top:30px}</style>
</head>
<body>
<h2>📦 단여재 추천 곀산기</h2>
<div><button class="tab-btn" onclick="switchTab('calculator')">곀산기</button><button class="tab-btn" onclick="switchTab('database')">단여재 목록</button></div>
<div class="tab active" id="calculator">
<h3>📐 벽체 레이어 구성</h3>
<table id="layerTable">
<thead><tr><th>재료명</th><th>두기 (mm)</th><th>엘전도율 λ</th><th>엘저하 R</th><th>삭제</th></tr></thead>
<tbody>
<tr class="fixed-layer"><td><input type="text" readonly value="실외 엘전달저항"></td><td><input type="number" readonly value="0"></td><td><input type="text" readonly value="-"></td><td><input class="resistance" type="number" readonly value="0.043"></td><td></td></tr>
<tr onclick="selectRow(this)">
<td><input type="text" list="insulationNames" placeholder="재료명 입력 또는 선택" oninput="fillFromInput(this)"></td>
<td><input type="number" oninput="updateResistance(this)"></td>
<td><input type="number" oninput="updateResistance(this)"></td>
<td><input class="resistance" type="number" readonly></td>
<td><button onclick="removeRow(this)">삭제</button></td>
</tr>
<tr class="fixed-layer"><td><input type="text" readonly value="실내 엘전달저항"></td><td><input type="number" readonly value="0"></td><td><input type="text" readonly value="-"></td><td><input class="resistance" type="number" readonly value="0.11"></td><td></td></tr>
</tbody>
</table>
<datalist id="insulationNames"></datalist>
<button onclick="addRow()">레이어 추가</button>
<h4>단여재 두기 (mm): <input id="insulationThickness" type="number"/></h4>
<h4>지역: <select id="region"><option value="중부1">중부1</option><option value="중부2">중부2</option><option value="남부">남부</option><option value="제주">제주</option></select>부위: <select id="zone"><option value="외벽">외벽</option><option value="지부">지부</option><option value="바닥">바닥</option></select></h4>
<button onclick="calculate()">추천</button> <button onclick="window.print()">📄 PDF 저장</button>
<div id="result"></div>
</div>
<div class="tab" id="database">
<h3>📋 단여재 목록</h3>
<table id="insulationTable"><thead><tr><th>이름</th><th>λ</th><th>등급</th><th>가격</th></tr></thead><tbody></tbody></table>
<h4>➕ 단여재 추가</h4>
<input id="newName" placeholder="이름" type="text"/>
<input id="newLambda" placeholder="λ (W/m·K)" type="number"/>
<input id="newGrade" placeholder="등급" type="text"/>
<input id="newPrice" placeholder="가격(원/㎡)" type="number"/>
<button onclick="addCustomInsulation()">추가</button>
</div>
<script>
const insulationList = [
  {name:"PF보드 A",lambda:0.019,grade:"불연",perm:0.2,price:22000},
  {name:"경질우레탄 B",lambda:0.025,grade:"준불연",perm:0.5,price:18000},
  {name:"XPS C",lambda:0.034,grade:"난연",perm:1.5,price:11000},
  {name:"진공단열 D",lambda:0.005,grade:"불연",perm:0.01,price:50000},
  {name:"EPS E",lambda:0.038,grade:"난연",perm:2.0,price:8000},
  {name:"EPS 난연 F",lambda:0.035,grade:"난연",perm:1.5,price:9000},
  {name:"에어로겔 G",lambda:0.015,grade:"불연",perm:0.05,price:60000},
  {name:"PIR보드 H",lambda:0.021,grade:"준불연",perm:0.3,price:23000},
  {name:"미네랄울 I",lambda:0.037,grade:"불연",perm:0.3,price:15000},
  {name:"그라스울 J",lambda:0.038,grade:"불연",perm:0.4,price:14000}
];
function updateDatalist(){
  const list=document.getElementById("insulationNames");
  list.innerHTML="";
  insulationList.forEach(i=>{
    const opt=document.createElement("option");
    opt.value=i.name;
    list.appendChild(opt);
  })
}
function fillFromInput(input){
  const value=input.value;
  const row=input.closest("tr");
  const insulation=insulationList.find(i=>i.name===value);
  if(insulation){
    const lambdaInput=row.cells[2].querySelector('input');
    lambdaInput.value=insulation.lambda;
    updateResistance(lambdaInput);
  }
}
function addRow(){
  const tbody=document.querySelector("#layerTable tbody");
  const row=document.createElement("tr");
  row.setAttribute("onclick","selectRow(this)");
  row.innerHTML='<td><input type="text" list="insulationNames" placeholder="재료명 입력 또는 선택" oninput="fillFromInput(this)"></td><td><input type="number" oninput="updateResistance(this)"></td><td><input type="number" oninput="updateResistance(this)"></td><td><input class="resistance" type="number" readonly></td><td><button onclick="removeRow(this)">삭제</button></td>';
  tbody.insertBefore(row,tbody.lastElementChild);
  updateDatalist();
}
updateDatalist();
</script>
</body></html>
